MACHINE CAN_BUS_tlc_exec

INCLUDES CAN_BUS_tlc

VARIABLES  counter

INVARIANT  counter : 0..10000

INITIALISATION counter := 0

OPERATIONS
	simulate = WHILE counter < 10000 DO
            Update(0);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(4);
            T1Evaluate;
            T1Calculate(-1);
            T1SendResult(3, -1);
            T1Wait(2);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(4);
            T2Evaluate;
            T2ReadBus(4, 0);
            T2Reset;
            T2WriteBus(5, 0);
            T2Wait(3);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(-1);
            T1SendResult(3, -1);
            T1Wait(2);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(5);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(-1);
            T1SendResult(3, -1);
            T1Wait(2);
            T2Evaluate;
            T2ReadBus(5, 0);
            T2Complete;
            T2ReleaseBus(5);
            T2Wait(3);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(3);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(4);
            T1Evaluate;
            T1Calculate(-1);
            T1SendResult(3, -1);
            T1Wait(2);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(4);
            T2Evaluate;
            T2ReadBus(4, 0);
            T2Reset;
            T2WriteBus(5, 0);
            T2Wait(3);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(-1);
            T1SendResult(3, -1);
            T1Wait(2);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(5);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(0);
            T1SendResult(3, 0);
            T1Wait(2);
            T2Evaluate;
            T2ReadBus(5, 0);
            T2Complete;
            T2ReleaseBus(5);
            T2Wait(3);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(3);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(4);
            T1Evaluate;
            T1Calculate(0);
            T1SendResult(3, 0);
            T1Wait(2);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(4);
            T2Evaluate;
            T2ReadBus(4, 0);
            T2Reset;
            T2WriteBus(5, 0);
            T2Wait(3);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(0);
            T1SendResult(3, 0);
            T1Wait(2);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(5);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(1);
            T1SendResult(3, 1);
            T1Wait(2);
            T2Evaluate;
            T2ReadBus(5, 0);
            T2Complete;
            T2ReleaseBus(5);
            T2Wait(3);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(3);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(4);
            T1Evaluate;
            T1Calculate(1);
            T1SendResult(3, 1);
            T1Wait(2);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(4);
            T2Evaluate;
            T2ReadBus(4, 0);
            T2Reset;
            T2WriteBus(5, 0);
            T2Wait(3);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(1);
            T1SendResult(3, 1);
            T1Wait(2);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(5);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(2);
            T1SendResult(3, 2);
            T1Wait(2);
            T2Evaluate;
            T2ReadBus(5, 0);
            T2Complete;
            T2ReleaseBus(5);
            T2Wait(3);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(3);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(4);
            T1Evaluate;
            T1Calculate(2);
            T1SendResult(3, 2);
            T1Wait(2);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(4);
            T2Evaluate;
            T2ReadBus(4, 0);
            T2Reset;
            T2WriteBus(5, 0);
            T2Wait(3);
            T3Evaluate;
            T3Read(4, 0);
            T3Poll;
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(2);
            T1SendResult(3, 2);
            T1Wait(2);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(5);
            T3Initiate;
            T3writebus(4, 0);
            T3Wait;
            Update(5);
            T1Evaluate;
            T1Calculate(3);
            T1SendResult(3, 3);
            T1Wait(2);
            T2Evaluate;
            T2ReadBus(5, 0);
            T2Complete;
            T2ReleaseBus(5);
            T2Wait(3);
            T3Evaluate;
            T3Read(5, 0);
            T3ReleaseBus(4);
            T3ReEnableWait;
            Update(3);
            Update(3);
            T1Evaluate;
            T1Calculate(-1);
            T1SendResult(3, -1);
            T1Wait(2);
            Update(3);
            T2Evaluate;
            T2ReadBus(3, -1);
            T2Calculate;
	        counter := counter + 1
	INVARIANT 1 = 1
	VARIANT 10000 - counter
	END

END
